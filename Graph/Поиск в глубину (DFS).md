# DFS (Поиск в глубину) — Полное руководство

DFS (Depth-First Search, поиск в глубину) — это один из базовых алгоритмов обхода графа. Он используется для исследования всех вершин графа и всех путей между ними. DFS глубоко исследует один путь до конца перед тем, как вернуться и исследовать другие пути.

DFS применяется в таких задачах, как:

- Проверка связности графа
- Поиск компонент связности
- Топологическая сортировка
- Поиск цикла в графе
- Решение головоломок, например лабиринтов

Граф можно представлять как:

- **Список смежности** — массив списков соседних вершин
- **Матрица смежности** — матрица `n x n`, где `1` обозначает ребро

---

## 1. Рекурсивная реализация DFS

Рекурсивный DFS очень интуитивен: мы просто посещаем вершину, помечаем её как посещённую и рекурсивно вызываем DFS для всех её соседей.

```python
def dfs_recursive(graph, vertex, visited=None):
    if visited is None:
        visited = set()
    visited.add(vertex)
    print(vertex, end=' ')
    
    for neighbor in graph[vertex]:
        if neighbor not in visited:
            dfs_recursive(graph, neighbor, visited)
    return visited

# Пример использования:
graph = {
    'A': ['B', 'C'],
    'B': ['A', 'D', 'E'],
    'C': ['A', 'F'],
    'D': ['B'],
    'E': ['B', 'F'],
    'F': ['C', 'E']
}

dfs_recursive(graph, 'A')
```

**Особенности рекурсивного DFS:**

- Простой и лаконичный код
- Использует стек вызовов Python, что ограничивает глубину рекурсии
- Удобен для небольших графов

---

## 2. Итеративная реализация DFS

Итеративный DFS использует **явный стек**, что избавляет от ограничений глубины рекурсии.

```python
def dfs_iterative(graph, start):
    visited = set()
    stack = [start]
    
    while stack:
        vertex = stack.pop()
        if vertex not in visited:
            visited.add(vertex)
            print(vertex, end=' ')
            # Добавляем соседей в стек
            # Чтобы порядок был аналогичен рекурсивному DFS, можно добавлять в обратном порядке
            stack.extend(reversed(graph[vertex]))
    
    return visited

# Пример использования:
dfs_iterative(graph, 'A')
```

**Особенности итеративного DFS:**

- Контролируемый стек вместо рекурсии
- Можно обходить графы любой глубины без риска переполнения стека
- Требует чуть больше кода для управления стеком

---

## 3. Сравнение рекурсивного и итеративного подхода

|Характеристика|Рекурсивный DFS|Итеративный DFS|
|---|---|---|
|Простота кода|✅ Очень прост|⚡ Немного сложнее|
|Ограничения глубины|❌ Ограничен стеком вызовов|✅ Нет ограничений глубины|
|Контроль стека|❌ Используется стек вызовов Python|✅ Явный стек|
|Применение|Малые и средние графы|Любые графы, включая большие и глубокие|
